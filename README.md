# Mind Haven

This is a static Progressive Web App designed to help users assess their mental health and receive coping tools. It now includes a Firebase backend for storing anonymous assessment results.

## Features

- Mental health assessment with 253 unique result variations
- 3D interactive UI elements and breathing/guided exercises
- Professional-looking printable report
- CSV export of individual results
- Admin dashboard with localStorage and Firestore export
- Backend endpoints hosted on Firebase Functions for scoring and storage

## Setup & Deployment

1. Install Firebase CLI:
   ```bash
   npm install -g firebase-tools
   ```
2. Log in and initialize if needed:
   ```bash
   firebase login
   firebase init
   ```
   Select **Hosting** and **Functions**. Use existing project or create a new one.
3. In `functions/package.json`, ensure dependencies are installed:
   ```bash
   cd public/functions
   npm install
   ```
4. Deploy functions and hosting:
   ```bash
   firebase deploy --only functions,hosting
   ```

> **Note:** The cloud functions (`processAssessment`, `saveAssessment`) expect Firestore to be enabled in your project. The frontend will automatically POST results to `/saveAssessment` after the user completes the assessment.

5. Configure `data.html` with your Firebase project credentials by editing the `firebaseConfig` object.

## Local Development

- You can run a local emulator for functions and Firestore:
  ```bash
  firebase emulators:start --only hosting,functions,firestore
  ```

- The app will then communicate with the local emulator instead of production.

## Data Export

- Users can download individual CSVs directly from the results page.
- Admins can visit `/data.html` to download all stored responses locally or fetch from Firestore if configured.

## Security & Privacy

- All assessment data is anonymous; no identifying information is collected.
- Use HTTPS hosting (Firebase hosting provides this by default).
- Review Firestore rules to restrict access: allow only the functions to write if desired.

## Extending

You may adjust the question set, result mapping, or build more advanced dashboards using the exported CSV or Firestore data.

---

*Generated by Copilot.*